# Copyright (c) 2016 Contributors to COVESA
#
# This program and the accompanying materials are made available under the
# terms of the Mozilla Public License 2.0 which is available at
# https://www.mozilla.org/en-US/MPL/2.0/
#
# SPDX-License-Identifier: MPL-2.0

#
# Fuel system for ICE / hybrids
#

SupportedFuelTypes:
  datatype: string[]
  type: attribute
  allowed: ['GASOLINE', 'DIESEL', 'E85', 'LPG', 'CNG', 'LNG', 'H2', 'OTHER']
  description: High level information of fuel types supported
  comment: If a vehicle also has an electric drivetrain (e.g. hybrid) that will be obvious from the PowerTrain.Type signal.

SupportedFuel:
  datatype: string[]
  type: attribute
  allowed: ['E5_95', 'E5_98', 'E10_95', 'E10_98', 'E85', 'B7', 'B10', 'B20', 'B30', 'B100',
            'XTL', 'LPG', 'CNG', 'LNG', 'H2', 'OTHER']
  description: Detailed information on fuels supported by the vehicle.
               Identifiers originating from DIN EN 16942:2021-08, appendix B,
               with additional suffix for octane (RON) where relevant.
  comment: RON 95 is sometimes referred to as Super, RON 98 as Super Plus.

HybridType:
  datatype: string
  type: attribute
  allowed: ['UNKNOWN', 'NOT_APPLICABLE', 'STOP_START', 'BELT_ISG', 'CIMG', 'PHEV']
  default: 'UNKNOWN'
  description: Defines the hybrid type of the vehicle.

TankCapacity:
  datatype: float
  type: attribute
  unit: l
  description: Capacity of the fuel tank in liters.

AbsoluteLevel:
  datatype: float
  type: sensor
  unit: l
  description: Current available fuel in the fuel tank expressed in liters.

RelativeLevel:
  datatype: uint8
  type: sensor
  unit: percent
  min: 0
  max: 100
  description: Level in fuel tank as percent of capacity. 0 = empty. 100 = full.

Range:
  datatype: uint32
  type: sensor
  unit: m
  description: Remaining range in meters using only liquid fuel.

TimeRemaining:
  datatype: uint32
  type: sensor
  unit: s
  description: Time remaining in seconds before the fuel tank is empty.

InstantConsumption:
  datatype: float
  type: sensor
  unit: l/100km
  min: 0
  description: Current consumption in liters per 100 km.

AverageConsumption:
  datatype: float
  type: sensor
  unit: l/100km
  min: 0
  description: Average consumption in liters per 100 km.
# The period used to calculate average consumption is OEM-specific
# It may e.g. be average consumption since start of current trip,
# since a user-initiated reset or during the lifetime of the vehicle.

ConsumptionSinceStart:
  datatype: float
  type: sensor
  unit: l
  description: Fuel amount in liters consumed since start of current trip.
  comment: A new trip is considered to start when engine gets enabled (e.g. LowVoltageSystemState in ON or START mode).
           A trip is considered to end when engine is no longer enabled.
           The signal may however keep the value of the last trip until a new trip is started.

ConsumptionSinceLastRefuel:
  datatype: float
  type: sensor
  unit: l
  description: Fuel consumption since last refueling.
  comment: Amount of fuel consumed since last refueling.

IsEngineStopStartEnabled:
  datatype: boolean
  type: sensor
  description: Indicates whether eco start stop is currently enabled.

IsFuelLevelLow:
  datatype: boolean
  type: sensor
  description: Indicates that the fuel level is low (e.g. <50km range).

RefuelPortPosition:
  datatype: string[]
  type: attribute
  allowed: ['FRONT_LEFT', 'FRONT_MIDDLE', 'FRONT_RIGHT',
            'REAR_LEFT', 'REAR_MIDDLE', 'REAR_RIGHT',
            'LEFT_FRONT', 'LEFT_MIDDLE', 'LEFT_REAR',
            'RIGHT_FRONT', 'RIGHT_MIDDLE', 'RIGHT_REAR']
  description: Position of refuel port(s).
               First part indicates side of vehicle, second part relative position on that side.

IsFuelPortFlapOpen:
  datatype: boolean
  type: actuator
  description: Status of the fuel port flap(s). True if at least one is open.

InstantaneousFuelEconomy:
  datatype: float
  type: sensor
  unit: km/l
  description: Real-time instantaneous fuel economy calculated over a short time window.
  comment: This value represents the current fuel efficiency at any given moment during vehicle operation.
           It is calculated based on the distance traveled and fuel consumed over a brief sampling period (typically around 500ms).
           The calculation compares the vehicle state before and after the sampling window to determine instantaneous efficiency.
           This metric refreshes frequently and can fluctuate significantly based on driving conditions, acceleration, and terrain.
           Unlike average fuel economy measurements, this provides immediate feedback on current driving efficiency.

CumulativeFuelEconomy:
  datatype: float
  type: sensor
  unit: km/l
  description: Cumulative average fuel economy calculated from vehicle start or last user reset.
  comment: This represents the accumulated fuel economy over the entire period since the last reset.
           Unlike trip-based measurements, this provides a long-term average of fuel efficiency.

DriveFuelEconomy:
  datatype: float
  type: sensor
  unit: km/l
  description: Average fuel economy for the current drive cycle, calculated from engine start to current time.
  comment: This represents the fuel efficiency during the active driving session.
           The value is reset when the engine is no longer enabled or when the user manually initiates a drive fuel economy reset.
           After reset, it is recalculated from zero when the engine restarts or the new drive cycle begins.
           It provides real-time average fuel economy for the ongoing drive cycle.

AfterRefuelingFuelEconomy:
  datatype: float
  type: sensor
  unit: km/l
  description: Average fuel economy calculated from the most recent refueling event to the current time.
  comment: This value represents the fuel efficiency for the period between consecutive refueling events.
           It is automatically reset to zero when refueling is detected and begins accumulating from that point.
           The calculation continues until the next refueling occurs.
           This metric is useful for tracking fuel efficiency improvements or changes between fill-ups.
